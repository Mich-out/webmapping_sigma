<!DOCTYPE html>
<head>    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <script>

            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
            function showPopup() {
            // Utilisation de la fonction Bootstrap pour afficher la fenêtre modale
            $('#newsModal').modal('show');}
            
            
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>    
    
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_12a535684e9cbcfc61dc2e70e64e6fac {
                    position: relative;
                    width: 100%;
                    height: calc(100% - 300px);
                    margin: 0 auto;
                    flex-grow: 1;
                }
                body {
                margin: 0;
                display: flex;
                flex-direction: column;
                }

                .topnav {
                overflow: hidden;
                background-color: #86A59C;
                }

                .topnav a {
                float: left;
                color: #270722;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
                }

                .topnav a:hover {
                background-color: #7D5BA6;
                color: white;
                }

                .topnav a.active {
                background-color: #04AA6D;
                color: white;
                }
                h1 {
                    font-family: 'Gill sans', sans-serif;
                    margin: 0; /* Remove default margin */
                    color: #daba05;
                    padding: 10px 0; /* Add padding for spacing */
                    border-bottom: 1px solid rgb(107, 107, 106); /* Add white border for separation */
                }
                .top-right-image-container {
                    position: absolute;
                    top: 1vw; /* Ajustez la position verticale en fonction de vos besoins */
                    right: 1vw; /* Ajustez la position horizontale en fonction de vos besoins */
                }

                .top-right-image-container img {
                    width: 10vw; /* Ajustez la largeur de l'image en fonction de vos besoins */
                    height: auto; /* Garantit que la hauteur est ajustée proportionnellement à la largeur */
                    border-radius: 5px; 
                }

                .top-left-image-container {
                    position: absolute;
                    top: 1vw; /* Ajustez la position verticale en fonction de vos besoins */
                    left: 1vw; /* Ajustez la position horizontale en fonction de vos besoins */
                }

                .top-left-image-container img {
                    width: 8vw; /* Ajustez la largeur de l'image en fonction de vos besoins */
                    height: auto; /* Garantit que la hauteur est ajustée proportionnellement à la largeur */
                    border-radius: 5px; 
                }

                .opacity_slider_control.ui-slider.ui-slider-vertical.ui-widget.ui-widget-content.ui-corner-all.leaflet-control {
                    margin-left: 15px;
                }

                .sidepanel-content {
                    font-size: 1.5rem;
                }

                .sidepanel-content h4 {
                    margin-top: 0;
                    margin-bottom: 1rem;
                    font-size: 2rem;
                }

                .sidepanel-content a {
                    text-decoration: none;
                    font-size: 6rem;
                    color: #270722;
                    transition: color 0.3s ease-in;
                }

                .sidepanel-content a:hover {
                    color: #270722;
                    text-decoration: underline;
                }

                .sidepanel-tab-content img {
                    display: block;
                    margin: 0 auto; /* Pour centrer l'image horizontalement */
                    width: 60%; /* Pour que l'image occupe 80% de la largeur du conteneur */
                    height: auto; /* Pour maintenir les proportions originales de l'image */
                    margin-top: 2rem
                }
                .modal-header {
                    background-color: #86A59C;
                    color: #270722
                }
                  
                
            </style>

            <!-- Leaflet Styles -->
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
            <!-- Bootstrap Styles -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
            <link rel="stylesheet" href="css/leaflet.wmslegend.css"/>
            <link rel="stylesheet" href="lib/opacity/Control.Opacity.css" />
            <link rel="stylesheet" href="lib/jquery/jquery-ui-1.10.3.custom.min.css" />
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Rozha+One&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="css/leaflet-sidepanel.css" />

            <!-- jQuery -->
            <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

            <!-- Leaflet Scripts -->
            <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>

            <!-- Bootstrap Scripts -->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

            <!-- Leaflet Plugins Scripts -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
            <script src="js/leaflet.wmslegend.js"></script>
            <script src="https://unpkg.com/leaflet-transparency@latest/leaflet-transparency.js"></script>
            <script src="lib/opacity/Control.Opacity.js"></script>
            <script src="lib/jquery/jquery-ui-1.10.3.custom.min.js"></script>
            <script src="js/leaflet-sidepanel.min.js"></script>

            

            
        
</head>
<body>    
            <div class="topnav"> <!-- Titre -->
                <h1 style="color: #ffffff; text-align: center; color:#270722; padding: 14px 16px; font-family: 'Rozha One', sans-serif; margin-top: 0.5vw; margin-bottom: 0;">
                    Présentation de la carte d'essences forestières de Niveau 2</h1>
                <a href="#" onclick="showPopup('Contexte')">Contexte</a>
                <a href="#" onclick="showPopup('Informations')">Informations sur la page</a>
                <a href="#" onclick="showPopup('Sources')">Sources</a>
            </div>
            
            
            <!-- Map -->
            <div class="folium-map" id="map_12a535684e9cbcfc61dc2e70e64e6fac" >
                <!-- Side Panel left -->
                <div id="mySidepanelLeft" class="sidepanel" aria-label="side panel" aria-hidden="false">
                    <div class="sidepanel-inner-wrapper">
                        <nav class="sidepanel-tabs-wrapper" aria-label="sidepanel tab navigation">
                            <ul class="sidepanel-tabs">
                                <li class="sidepanel-tab">
                                    <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-1">
                                        Correspondances
                                    </a>
                                </li>
                                <li class="sidepanel-tab">
                                    <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-2">
                                        Images
                                    </a>
                                </li>
                                
                            </ul>
                        </nav>
                        <div class="sidepanel-content-wrapper">
                            <div class="sidepanel-content">
                                <div class="sidepanel-tab-content" data-tab-content="tab-1">
                                    <h4>Table des correspondances</h4>
                                    <p align="justify">Vous trouverez ci-dessous l'intitulé correspondant aux entrées de légende de la carte:<br>
                                        - 10 : Feuillus<br>
                                        - 11 : Peupleraie<br>
                                        - 21 : Conifères autres que pin<br>
                                        - 22 : Pins<br>
                                        - 23 : Mélange pins et autres conifères</p>
                                </div>
                                <div class="sidepanel-tab-content" data-tab-content="tab-2">
                                    <h4>Images</h4>
                                    <p align="justify">Voici des images d'illustration pour chaque entrée de légende. Ces images sont à but d'illustration et ne sauraient
                                        pas représenter les espèces réellement en présence dans la zone :<br>
                                        - Feuillus: <img src=https://upload.wikimedia.org/wikipedia/commons/0/0b/Raunkiaer.jpg alt="Feuillus"><br>
                                        - Peupleraie: <img src="https://franceboisforet.fr/wp-content/uploads/2019/03/vue_peupleraie.jpg" alt="Peupleraie"><br>
                                        - Conifères autres que pin (Cèdres): <img src="https://www.francebleu.fr/s3/cruiser-production/2023/04/1c11d7e1-aad6-4917-8654-e315128341e5/1200x680_sc_csm-p-ens-forets-foret-des-cedres-5-554b41c541.jpg" alt="Cèdres"><br>
                                        - Pins: <img src="https://www.forestopic.com/images/Articles/2021/Pins-Var-Joel-Perrin-CNPF.jpg" alt="Pins"></p>
                                </div>
                              
                            </div>
                        </div>
                    </div>
                    <div class="sidepanel-toggle-container">
                        <button class="sidepanel-toggle-button" type="button" aria-label="toggle side panel"></button>
                    </div>
                </div>
            </div>
            <!-- Fenêtre modale Bootstrap -->
            <div class="modal fade" id="newsModal" role="dialog">
                <div class="modal-dialog">
                    <!-- Contenu de la fenêtre modale -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title" id="modalTitle"></h4>
                        </div>
                        <div class="modal-body" id="modalBody"></div>       
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Logos sigma et ensat -->
            <div class="top-right-image-container">
                <img src="img/bandeau_master_sigma.jpg" alt="Logo master Sigma">
            </div>
            <div class="top-left-image-container">
                <img src="https://upload.wikimedia.org/wikipedia/fr/5/57/Logo_inp_ensat_2022.png" alt="Logo ENSAT">
            </div>
        

            <script>
                // Popup header
                function showPopup(type) {
                    // Utilisation de la fonction Bootstrap pour afficher la fenêtre modale
                    $('#newsModal').modal('show');
                    
                    // Set modal content based on the type
                    $('#modalTitle').text(type);
                    
                    if (type === 'Contexte') {
                        $('#modalBody').html('<p align="justify">La carte que nous présentons ici a été produite dans le cadre du Master SIGMA - promotion 2023/2024 - pour un projet de télédétection et valorisée via cette cartographie en ligne dans le cadre de l\'UE Webmapping. L\'objectif de ce projet était de créer une classification supervisée des zones de forêt dans la Haute-Garonne en utilisant des images Sentinel 2. Trois niveaux de nomenclature, avec différents degrés de détail, ont été mis en place. Dans cette carte, nous vous présentons le deuxième niveau de classification. Il est important de noter que cette classification ne reflète pas la réalité et des ajustements liés au modèle sont nécessaires. Pour une comparaison, vous pouvez également accéder à la nomenclature la plus récente proposée par la BD Forêt.<br><br>La forêt en France occupe 31 % du territoire métropolitain et joue un rôle essentiel dans l’économie du bois, la préservation écologique, le patrimoine culturel et les loisirs. Pour garantir la durabilité de ces usages, la télédétection est de plus en plus utilisée. La BD Forêt® de l’IGN, qui identifie les types de formations végétales à partir de photographies aériennes en infrarouge, est un outil essentiel. Cependant, la BD Forêt® présente des inconvénients en termes de temporalité et d’exhaustivité. Dans le cadre d’une étude visant à actualiser et approfondir la BD Forêt® V2, nous évaluons son potentiel à travers une classification supervisée. Notre zone d’étude est la Haute-Garonne, avec un accent particulier sur la forêt de Bouconne, principalement composée de feuillus.</p>');
                    } else if (type === 'Informations') {
                        // Add information content
                        $('#modalBody').html('<p align="justify">Cette cartographie a été réalisée par Michel Tarby, étudiant en 3ème année de l\'ENSAT. Plusieurs outils '+
                            'sont à votre disposition afin de prendre connaissance des essences forestières présentes dans la Haute-Garonne. Ces outils sont '+
                            'les suivants : </p> <p align="justify">- Une barre permettant de gérer l\'opacité de la couche afin de pouvoir visualiser la carte en superposition '+
                            'avec le fond de carte (image satellite notamment). Par défaut, l\'opacité est définie à 50% <br><br> - Une sélection de fond de carte en haut à droite de l\'écran ainsi que la BD forêt initiale (désactivée par défaut)'+
                            '<br><br> - Une légende afin de distinguer quels sont les essences en présence. <br><br>- Un panneau latéral contenant la correspondance intitulés/codes légende ainsi'+
                            ' que des images de chaque type d\'essence.<br><br> Par la suite, vous pouvez naviguer et zoomer comme bon vous semble '+
                            'sur la carte. <br><br>Bonne visite !</p>');
                    } else if (type === 'Sources') {
                        // Add source content
                        $('#modalBody').html('<p align="justify">Side Panel Module: Maxwell Bento, <a href="https://github.com/maxwell-ilai/Leaflet.SidePanel" target="_blank">Lien du plugin</a><br>'+
                            'WMS Legend Module: Tim Sutton, <a href="https://github.com/kartoza/leaflet-wms-legend" target="_blank">Lien du plugin</a><br>'+
                            'Opacity control Module: lizardtechblog, <a href="https://github.com/lizardtechblog/Leaflet.OpacityControls/tree/master?tab=readme-ov-file" target="_blank">Lien du plugin</a><br>'+
                            'Image feuillus: Wikipedia, <a href="https://upload.wikimedia.org/wikipedia/commons/0/0b/Raunkiaer.jpg" target="_blank">Lien vers l\'image</a><br>'+
                            'Image peupleraie: France Bois Forêt, <a href="https://franceboisforet.fr/wp-content/uploads/2019/03/vue_peupleraie.jpg" target="_blank">Lien vers l\'image</a><br>'+
                            'Image cèdres: France Bleu, <a href="https://www.francebleu.fr/s3/cruiser-production/2023/04/1c11d7e1-aad6-4917-8654-e315128341e5/1200x680_sc_csm-p-ens-forets-foret-des-cedres-5-554b41c541.jpg" target="_blank">Lien vers l\'image</a><br>'+
                            'Image pins: Forestopic, <a href="https://www.forestopic.com/images/Articles/2021/Pins-Var-Joel-Perrin-CNPF.jpg" target="_blank">Lien vers l\'image</a></p>');
                    }
                }

                  
            </script>
        
</body>
<script>    
            // Instance carte centrée sur Toulouse
            var map_12a535684e9cbcfc61dc2e70e64e6fac = L.map(
                "map_12a535684e9cbcfc61dc2e70e64e6fac",
                {
                    center: [43.6, 1.44],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            // Mise en place panneau latéral
            const sidepanelRight = L.control.sidepanel('mySidepanelLeft', {
                panelPosition: 'left',
                tabsPosition: 'top',
                pushControls: true,
                darkMode: true,
                startTab: 'tab-1'
            }).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);

            // Ajout du controle de zoom
            L.control.scale().addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);
            
            // Création de panes pour gérer l'index de chaque couche
            map_12a535684e9cbcfc61dc2e70e64e6fac.createPane("pane200").style.zIndex = 200;
            map_12a535684e9cbcfc61dc2e70e64e6fac.createPane("pane800").style.zIndex = 800;

            // Récupération flux WMS Carte essences lvl2
            var macro_element_062c85610f3f60b914dd5cb29d8e523e = L.tileLayer.wms(
                "https://www.geotests.net/geoserver/tarby_ruiz_sauger_mervant/wms",
                {"attribution": "", "format": "image/png", "layers": "tarby_ruiz_sauger_mervant:carte_essences_lvl2", "styles": "carte_essences_lvl2", "transparent": true,  "version": "1.1.1", "pane": "pane800" }
            ).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);

            // Récupération flux WMS Carte échantillons
            var macro_element_2 = L.tileLayer.wms(
                "https://www.geotests.net/geoserver/tarby_ruiz_sauger_mervant/wms",
                {"attribution": "", "format": "image/png", "layers": "tarby_ruiz_sauger_mervant:Sample_BD_foret_T31TCJ", "styles": "lvl2_sample", "transparent": true,  "version": "1.1.1", "pane": "pane200" }
            ).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);

            // Récupération fonds de carte
            var tile_layer_f463fdceecbe9fa41194a86f263fa164 = L.tileLayer(
                "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);

            var tile_layer_7dcc31061d08a6967a0b8510badf64e7 = L.tileLayer(
                "http://mt0.google.com/vt/lyrs=s\u0026hl=en\u0026x={x}\u0026y={y}\u0026z={z}",
                {"attribution": "Google", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);
        
            // Mise en place controle des couches 
            var layer_control_e86a184cb30d5a4f53d49b7706346094 = {
                base_layers : {
                    "openstreetmap" : tile_layer_f463fdceecbe9fa41194a86f263fa164,
                    "Google Satellite" : tile_layer_7dcc31061d08a6967a0b8510badf64e7,
                },
                overlays :  {   
                    "Carte d\u0027essences de Niveau 2" : macro_element_062c85610f3f60b914dd5cb29d8e523e,
                    "Carte originale des essences de Niveau 2": macro_element_2
                },
            };

            L.control.layers(
                layer_control_e86a184cb30d5a4f53d49b7706346094.base_layers,
                layer_control_e86a184cb30d5a4f53d49b7706346094.overlays,
                {"autoZIndex": true, "collapsed": true, "position": "topright"}
            ).addTo(map_12a535684e9cbcfc61dc2e70e64e6fac);

            // Récupération de la légende
            uri = "https://www.geotests.net/geoserver/tarby_ruiz_sauger_mervant/wms?";
            uri += "SERVICE=WMS&VERSION=1.3.0&SLD_VERSION=1.1.0&";
            uri += "REQUEST=GetLegendGraphic&FORMAT=image/jpeg&LAYER=tarby_ruiz_sauger_mervant:carte_essences_lvl2&STYLE=carte_essences_lvl2";
            L.wmsLegend(uri);

            // Mise en place controle opacité
            var higherOpacity = new L.Control.higherOpacity({ position: 'topleft' });
            map_12a535684e9cbcfc61dc2e70e64e6fac.addControl(higherOpacity);
            var opacitySlider = new L.Control.opacitySlider({ position: 'topleft'});
            map_12a535684e9cbcfc61dc2e70e64e6fac.addControl(opacitySlider);
            var lowerOpacity = new L.Control.lowerOpacity({ position: 'topleft' });
            map_12a535684e9cbcfc61dc2e70e64e6fac.addControl(lowerOpacity);
    
            opacitySlider.setOpacityLayer(macro_element_062c85610f3f60b914dd5cb29d8e523e);
            
            macro_element_062c85610f3f60b914dd5cb29d8e523e.setOpacity(0.5);

            map_12a535684e9cbcfc61dc2e70e64e6fac.removeLayer(macro_element_2)
        
</script>
